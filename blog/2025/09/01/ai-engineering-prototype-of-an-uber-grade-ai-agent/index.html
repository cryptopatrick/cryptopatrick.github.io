<!DOCTYPE html>
<html lang="en-EN">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=60544&amp;path=livereload" data-no-instant defer></script>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta content="keyword 1, keyword 2, keyword 3" name="keywords">
<meta content="CryptoPatrick" name="author">
<meta property="og:title" content="ðŸ¤– Ai: Engineering: Prototype of an Uber Grade Ai Agent - Seamless Global Nature">
<meta property="og:url" content="http://localhost:60544/blog/2025/09/01/ai-engineering-prototype-of-an-uber-grade-ai-agent/">
<meta property="og:description" content="">
<meta property="og:type" content="website" />


<meta property="og:image" content="http://localhost:60544/img/post-name/name.jpg" />


<title>ðŸ¤– Ai: Engineering: Prototype of an Uber Grade Ai Agent | Seamless Global Nature</title>

<link rel="stylesheet" href="http://localhost:60544//css/style.css">
<link rel="stylesheet" href="http://localhost:60544//css/customcode.css">

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<link rel="stylesheet"
      href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.0/build/styles/default.min.css">

</head>

<body>
<section class="section">
  <div class="container">
    <nav class="nav">

 <img src="../../../../../profile.jpg" alt="Avatar" style="margin-right: 1em" height="100px">
      <div class="nav-left" style="flex-basis: auto;">
        <a class="nav-item" href="http://localhost:60544/"><h1 class="title is-4">Seamless Global Nature</h1></a>
      <nav class="nav-item level is-mobile">
          
          
          <a class="level-item" href="http://localhost:60544/about/" style="display: flex; align-items: center;">
            
            <span class="icon" style="margin-right: 0.175em; display: flex; align-items: center;">
              <i class="fa fa-male"></i>
            </span>
            
            About Me
          </a>
          
          <a class="level-item" href="http://localhost:60544/tags/" style="display: flex; align-items: center;">
            
            <span class="icon" style="margin-right: 0.175em; display: flex; align-items: center;">
              <i class="fa fa-tags"></i>
            </span>
            
            Tags
          </a>
          
          <a class="level-item" href="https://100-days-of-vibe.vercel.app" style="display: flex; align-items: center;">
            
            <span class="icon" style="margin-right: 0.175em; display: flex; align-items: center;">
              <i class="fa fa-paper-plane"></i>
            </span>
            
            100DaysOfVibe
          </a>
          
          <a class="level-item" href="https://x.com/cryptopatrick" style="display: flex; align-items: center;">
            
            <span class="icon" style="margin-right: 0.175em; display: flex; align-items: center;">
              <i class="fa fa-twitter"></i>
            </span>
            
             
          </a>
          
          <a class="level-item" href="https://github.com/cryptopatrick?tab=repositories" style="display: flex; align-items: center;">
            
            <span class="icon" style="margin-right: 0.175em; display: flex; align-items: center;">
              <i class="fa fa-github"></i>
            </span>
            
             
          </a>
          
          <a class="level-item" href="https://www.instagram.com/cryptopatrickk/" style="display: flex; align-items: center;">
            
            <span class="icon" style="margin-right: 0.175em; display: flex; align-items: center;">
              <i class="fa fa-instagram"></i>
            </span>
            
             
          </a>
          
        </nav>
      </div>
      <div class="nav-right">
        <nav class="nav-item level is-mobile">
          
        </nav>
      </div>
    </nav>
  </div>
</section>

<section class="section">
  <div class="container">
    <h1 class="title">ðŸ¤– Ai: Engineering: Prototype of an Uber Grade Ai Agent</h1>
    
    
    <h2 class="subtitle is-5">
      September 1, 2025
       by CryptoPatrick
      
        
        <span class="tags-inline" style="margin-left:0.1em;">
          
            
            <a class="tag is-link is-light" href="../../../../../tags/concepts/" style="margin-left:0.25em;">Concepts</a>
          
            
            <a class="tag is-link is-light" href="../../../../../tags/reading/" style="margin-left:0.25em;">Reading</a>
          
        </span>
      
      
    </h2>
    <div class="content">
      <!-- ////////////////////////////////////////////////////////////////////////-->
<p><img src="https://img.shields.io/badge/Work_In_Progress-orange.svg" alt="Version:0.1.0">
<img src="https://img.shields.io/badge/Text_Version-0.4.5-blue.svg" alt="Version:0.1.0">
<img src="https://img.shields.io/badge/Source_Code_Builds-Yes-green.svg" alt="Version:0.1.0"></p>
<!-- ////////////////////////////////////////////////////////////////////////-->
<br>
<blockquote>
<p><strong>Preface:</strong></p>
</blockquote>
<!-- ////////////////////////////////////////////////////////////////////////-->
<h2 id="component-1-offline-document-processing">Component-1: Offline Document Processing</h2>
<p>In this step we are going to save our data inside a <em>knowledge base</em>.
Problem: &ldquo;How do we <em>extract</em> the raw content from the <code>.pdf</code> that we have at our disposal?</p>
<p>We need to have high quality data, but <em>how</em> do we know if we have hight quality data?</p>
<h3 id="document-processing">Document Processing</h3>
<p>Although there are severatl tools that we can use to extract data from documents, one challenge is to find
a universal solution that works well for <em>all</em> kinds of data.</p>
<p>Solution chosen: transition from pdfs to google docs, using html formatting for more accurate text
extraction. We&rsquo;ll use <strong>MarkitDown</strong> to load the data in Markdown (PDF-MD).
Four candidates: LlamaParse, Pypdfium2, Unstructured Loader, Docling,</p>
<blockquote>
<p>arxig.org/pdf/2410.09871 A comparative study of pdf parsing tools across diverse document categories showed wthat PyPDFium works very well across different categories (financial, scientific, etc)</p>
</blockquote>
<p>retriever : we need to know if our retriever is able to extract good quality from our pdf.
generator</p>
<h3 id="knowledge-documents-as-google-docs">Knowledge Documents as Google Docs</h3>
<h3 id="content-extraction-using-gdoc-api">Content Extraction (using GDoc API)</h3>
<p>So, we have our pdf, we extract it, convert it to html, and load data.
On <strong>chunk</strong> level,</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#434f54">metadata</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#434f54">source</span>: <span style="color:#728e00">&lt;</span><span style="color:#434f54">filepath</span><span style="color:#728e00">&gt;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#434f54">page_no</span>: <span style="color:#8a7b52">0</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#434f54">custom</span> <span style="color:#434f54">metadata</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#434f54">source</span>: <span style="color:#728e00">&lt;</span><span style="color:#434f54">filepath</span><span style="color:#728e00">&gt;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#434f54">page_no</span>: <span style="color:#8a7b52">0</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#434f54">document_summary</span>: <span style="color:#7f8c8d">&#34;...&#34;</span>, <span style="color:#434f54">use</span> <span style="color:#434f54">text</span><span style="color:#728e00">-</span><span style="color:#434f54">rerank</span> <span style="color:#728e00">or</span> <span style="color:#434f54">use</span> <span style="color:#434f54">llm</span> (<span style="color:#8a7b52">8</span><span style="color:#434f54">B</span><span style="color:#728e00">-</span><span style="color:#434f54">llama</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#434f54">below</span> <span style="color:#434f54">will</span> <span style="color:#434f54">be</span> <span style="color:#434f54">generated</span> <span style="color:#434f54">by</span> <span style="color:#434f54">llm</span>
</span></span><span style="display:flex;"><span>  <span style="color:#434f54">chunk_id</span>: <span style="color:#7f8c8d">&#34;...&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#434f54">chunk_faqs</span>:<span style="color:#7f8c8d">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#434f54">chunk_keyword</span>:<span style="color:#7f8c8d">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>We&rsquo;ll use a vector database because it supports:</p>
<ul>
<li>vectorization of our data,</li>
<li>and we can add metadata into the payload, which can improve the perfoance and we can also filter.</li>
<li>To further improve quality we will use <em>hybrid search</em> (vector search (which is simply cosing similiarty),, and keyword search (BM25),   )</li>
<li>filter condition for the retrieval</li>
</ul>
<p>To recap: we have a pdf. we convert it to html or markdown format, after we&rsquo;ve
extracted the code, we do metadata filtering, document summary, for better retrieval.
For retrieval we&rsquo;ll use hybrid search and keyword search.</p>
<h1 id="qdrant-and-rust">Qdrant (and Rust)</h1>
<p>we&rsquo;ll do hybrid search and save metadate into the payload.</p>
<p>document summary will be appeneded accrosss all the chunks.</p>
<hr>
<h2 id="component-2-agentic-rag-real-time-answer-generation">Component-2: Agentic RAG Real-Time Answer Generation</h2>
<p>For answer generation we will use streamlit.
Slack Interface
FastAPI + React,
Streamlet
Discord Chatbot</p>
<blockquote>
<p>Large:OpenAi, small: a small lightweight model gpt-4 mini, fewer paramters.</p>
</blockquote>
<h2 id="evaluation">Evaluation</h2>
<p>How do we evaluate our RAG pipeline?
Once we have a real-time info (user asking questions) we use
LLM-as-Judge Eval. There are only six of these: Relevance, answer-relevance, groundedness, ground truth,
faithfulness, correctnes</p>
<blockquote>
<p>LLM Eval Dashboard (90% of devs never evaluate their RAG)
use a binary resonse - true of false, not rank 1-5 metric.</p>
</blockquote>
<blockquote>
<p>Read the articel: Creating LLM as a ajudge that drive   busines resuts.</p>
</blockquote>
<h2 id="answer-generation">Answer Generation</h2>
<p>Typically needs two things:</p>
<ol>
<li>single hop questions</li>
<li>multi hop questions</li>
</ol>
<p>prompt x -&gt; resopnse
prompt x.y -&gt; resopnse
chain-of-rag
tools support</p>
<blockquote>
<p>How I tought the Ai Agent when to sarch web vs db</p>
</blockquote>
<hr>
<p>Large LLM: gemini-2.5-pro
Small: MetaLLama3 8b -instruct</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#728e00">import</span> <span style="color:#434f54">pypdfium2</span>
</span></span><span style="display:flex;"><span><span style="color:#728e00">import</span> <span style="color:#434f54">langchain</span><span style="color:#728e00">-</span><span style="color:#434f54">community</span> <span style="color:#434f54">langchain</span>
</span></span><span style="display:flex;"><span><span style="color:#728e00">import</span> <span style="color:#434f54">qdrant</span><span style="color:#728e00">-</span><span style="color:#434f54">client</span> <span style="color:#434f54">fastembed</span>
</span></span><span style="display:flex;"><span><span style="color:#728e00">import</span> <span style="color:#434f54">langchain</span><span style="color:#728e00">-</span><span style="color:#434f54">sambanova</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#95a5a6"># MarkItDown from Microsoft, will convert any pdf/docs/ppt into markdown.</span>
</span></span><span style="display:flex;"><span><span style="color:#728e00">from</span> <span style="color:#434f54">markitdown</span> <span style="color:#728e00">import</span> <span style="color:#434f54">MarkItDown</span>
</span></span><span style="display:flex;"><span><span style="color:#434f54">md</span> <span style="color:#728e00">=</span> <span style="color:#434f54">MarkItDown</span>(<span style="color:#434f54">enable_plugins</span><span style="color:#728e00">=</span><span style="color:#00979d">False</span>)
</span></span><span style="display:flex;"><span><span style="color:#434f54">result</span> <span style="color:#728e00">=</span> <span style="color:#434f54">md</span><span style="color:#728e00">.</span><span style="color:#434f54">convert</span>(<span style="color:#7f8c8d">&#34;/content/policy/doc.pdf&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#728e00">print</span>(<span style="color:#434f54">result</span><span style="color:#728e00">.</span><span style="color:#434f54">text_content</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#434f54">doc2</span> <span style="color:#728e00">=</span> <span style="color:#434f54">md</span><span style="color:#728e00">.</span><span style="color:#434f54">convert</span>(<span style="color:#7f8c8d">&#34;/content/final.pdf&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#728e00">print</span>(<span style="color:#434f54">doc2</span><span style="color:#728e00">.</span><span style="color:#434f54">text_content</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#95a5a6"># PyPDFium2</span>
</span></span></code></pre></div><p>85 chunks:
each chunk contains: source, total_pages, page</p>
<p>to these we add the following custom metadata which will generate with an llm: chunk_faqs, documents_summary, chunk_keywords, chunk_id.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#728e00">import</span> <span style="color:#434f54">os</span>
</span></span><span style="display:flex;"><span><span style="color:#728e00">from</span> <span style="color:#434f54">google.colab</span> <span style="color:#728e00">import</span> <span style="color:#434f54">userdata</span>
</span></span><span style="display:flex;"><span><span style="color:#728e00">from</span> <span style="color:#434f54">langchain_sambanova</span> <span style="color:#728e00">import</span> <span style="color:#434f54">ChatSambaNovaCloud</span>
</span></span><span style="display:flex;"><span><span style="color:#728e00">from</span> <span style="color:#434f54">langchain.schema</span> <span style="color:#728e00">import</span> <span style="color:#434f54">HumanMessage</span>
</span></span><span style="display:flex;"><span><span style="color:#728e00">import</span> <span style="color:#434f54">json</span>
</span></span><span style="display:flex;"><span><span style="color:#728e00">from</span> <span style="color:#434f54">pydantic</span> <span style="color:#728e00">import</span> <span style="color:#434f54">BaseModel</span>, <span style="color:#434f54">Field</span>
</span></span><span style="display:flex;"><span><span style="color:#728e00">from</span> <span style="color:#434f54">typing</span> <span style="color:#728e00">import</span> <span style="color:#434f54">List</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#434f54">os</span><span style="color:#728e00">.</span><span style="color:#434f54">environ</span>[<span style="color:#7f8c8d">&#39;SAMBANOVA_API_KEY&#39;</span>] <span style="color:#728e00">=</span> <span style="color:#434f54">userdata</span><span style="color:#728e00">.</span><span style="color:#434f54">get</span>(<span style="color:#7f8c8d">&#34;SAMBANOVA_API_KEY&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#434f54">https</span>:<span style="color:#728e00">//</span><span style="color:#434f54">www</span><span style="color:#728e00">.</span><span style="color:#434f54">youtube</span><span style="color:#728e00">.</span><span style="color:#434f54">com</span><span style="color:#728e00">/</span><span style="color:#434f54">live</span><span style="color:#728e00">/</span><span style="color:#434f54">lROzXRNrXSk</span><span style="color:#a61717">?</span><span style="color:#434f54">si</span><span style="color:#728e00">=</span><span style="color:#434f54">ah5196quzHCz43E9</span><span style="color:#728e00">&amp;</span><span style="color:#434f54">t</span><span style="color:#728e00">=</span><span style="color:#8a7b52">2842</span>
</span></span></code></pre></div><hr>
<p>the current archtecture contains room for a lot of improvements:
generator side:
when we convert our pdf to gdocs, we can&rsquo;t have multimodal (can only be text data, not images)</p>
<p><figure><img src="../../../../../img/time-lock-message/rebellion.jpg">
</figure>
<br>
<strong>â–²[^1]</strong> A Rebel ship orbiting above the Federation&rsquo;s top secret military research lab, <em>The Periphery</em>.</p>
<p>â €â €â €â €â € This is a paragraph.
â €â €â €â €â € This is another paragraph.</p>




    </div>
    
    
  </div>
</section>

<section class="section">
  <div class="container has-text-centered">
    <p>'I write to understand as much as to be understood.' â€”Elie Wiesel<br> (c) 2024 CryptoPatrick</p>
  </div>
</section>

<script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.0/build/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>




</body>
