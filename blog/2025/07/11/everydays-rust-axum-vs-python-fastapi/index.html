<!DOCTYPE html>
<html lang="en-EN">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=60544&amp;path=livereload" data-no-instant defer></script>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta content="keyword 1, keyword 2, keyword 3" name="keywords">
<meta content="CryptoPatrick" name="author">
<meta property="og:title" content="ðŸ¦€ Everydays: Rust Axum vs Python FastAPI - Seamless Global Nature">
<meta property="og:url" content="http://localhost:60544/blog/2025/07/11/everydays-rust-axum-vs-python-fastapi/">
<meta property="og:description" content="">
<meta property="og:type" content="website" />


<meta property="og:image" content="http://localhost:60544/img/post-name/name.jpg" />


<title>ðŸ¦€ Everydays: Rust Axum vs Python FastAPI | Seamless Global Nature</title>

<link rel="stylesheet" href="http://localhost:60544//css/style.css">
<link rel="stylesheet" href="http://localhost:60544//css/customcode.css">

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<link rel="stylesheet"
      href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.0/build/styles/default.min.css">

</head>

<body>
<section class="section">
  <div class="container">
    <nav class="nav">

 <img src="../../../../../profile.jpg" alt="Avatar" style="margin-right: 1em" height="100px">
      <div class="nav-left" style="flex-basis: auto;">
        <a class="nav-item" href="http://localhost:60544/"><h1 class="title is-4">Seamless Global Nature</h1></a>
      <nav class="nav-item level is-mobile">
          
          
          <a class="level-item" href="http://localhost:60544/about/" style="display: flex; align-items: center;">
            
            <span class="icon" style="margin-right: 0.175em; display: flex; align-items: center;">
              <i class="fa fa-male"></i>
            </span>
            
            About Me
          </a>
          
          <a class="level-item" href="http://localhost:60544/tags/" style="display: flex; align-items: center;">
            
            <span class="icon" style="margin-right: 0.175em; display: flex; align-items: center;">
              <i class="fa fa-tags"></i>
            </span>
            
            Tags
          </a>
          
          <a class="level-item" href="https://100-days-of-vibe.vercel.app" style="display: flex; align-items: center;">
            
            <span class="icon" style="margin-right: 0.175em; display: flex; align-items: center;">
              <i class="fa fa-paper-plane"></i>
            </span>
            
            100DaysOfVibe
          </a>
          
          <a class="level-item" href="https://x.com/cryptopatrick" style="display: flex; align-items: center;">
            
            <span class="icon" style="margin-right: 0.175em; display: flex; align-items: center;">
              <i class="fa fa-twitter"></i>
            </span>
            
             
          </a>
          
          <a class="level-item" href="https://github.com/cryptopatrick?tab=repositories" style="display: flex; align-items: center;">
            
            <span class="icon" style="margin-right: 0.175em; display: flex; align-items: center;">
              <i class="fa fa-github"></i>
            </span>
            
             
          </a>
          
          <a class="level-item" href="https://www.instagram.com/cryptopatrickk/" style="display: flex; align-items: center;">
            
            <span class="icon" style="margin-right: 0.175em; display: flex; align-items: center;">
              <i class="fa fa-instagram"></i>
            </span>
            
             
          </a>
          
        </nav>
      </div>
      <div class="nav-right">
        <nav class="nav-item level is-mobile">
          
        </nav>
      </div>
    </nav>
  </div>
</section>

<section class="section">
  <div class="container">
    <h1 class="title">ðŸ¦€ Everydays: Rust Axum vs Python FastAPI</h1>
    
    
    <h2 class="subtitle is-5">
      July 11, 2025
       by CryptoPatrick
      
        
        <span class="tags-inline" style="margin-left:0.1em;">
          
            
            <a class="tag is-link is-light" href="../../../../../tags/everydays/" style="margin-left:0.25em;">Everydays</a>
          
            
            <a class="tag is-link is-light" href="../../../../../tags/rust/" style="margin-left:0.25em;">Rust</a>
          
        </span>
      
      
    </h2>
    <div class="content">
      <!-- ////////////////////////////////////////////////////////////////////////-->
<p><img src="https://img.shields.io/badge/Work_In_Progress-orange.svg" alt="Version:0.1.0">
<img src="https://img.shields.io/badge/Text_Version-0.4.5-blue.svg" alt="Version:0.1.0">
<img src="https://img.shields.io/badge/Source_Code_Builds-Yes-green.svg" alt="Version:0.1.0"></p>
<!--![Version:0.1.0](https://img.shields.io/badge/Version-0.5.0-white.svg)  -->
<!--[![Version:0.1.0](https://img.shields.io/badge/File-issue-orange.svg)](https://github.com/cryptopatrick/learn_wgpu/issues)-->
<!-- ////////////////////////////////////////////////////////////////////////-->
<br>
<blockquote>
<p><strong>Preface:</strong> In this post we won&rsquo;t be doing much, just intstall Rust and get setup with an editor.</p>
</blockquote>
<blockquote>
<p><strong>Code:</strong> The complete source code is available on my <a href="https://github.com/cryptopatrick/timed_release_crypto">GitHub</a>.</p>
</blockquote>
<!-- ////////////////////////////////////////////////////////////////////////-->
<h2 id="to-send-a-message-into-the-future">To send a message into the future</h2>
<p><figure><img src="../../../../../img/time-lock-message/rebellion.jpg">
</figure>
<br>
<strong>â–²<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup></strong> A Rebel ship orbiting above the Federation&rsquo;s top secret military research lab, <em>The Periphery</em>.</p>
<p>â €â €â €â €â € This is a paragraph.
â €â €â €â €â € This is another paragraph.</p>
<!-- //////////////////////////////////////////////////////////////////////////-->
<h3 id="title">Title</h3>
<p><strong>List of topics to cover (briefly):</strong> <br>
[ ] Carmicheal Numbers and the need for primality testing of huge numbers<br>
[x] Probabilitic Primality Testing with Rabin-Miller</p>
<table>
  <thead>
      <tr>
          <th style="text-align: center">Step</th>
          <th style="text-align: left">Process</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: center"><a href="#step-0-preparing-the-payload">0.</a></td>
          <td style="text-align: left">Gather message data, calculate time-lock duration, estimate attacker&rsquo;s squaring power</td>
      </tr>
      <tr>
          <td style="text-align: center"><a href="#step-1-compute-the-composite-modulus">1.</a></td>
          <td style="text-align: left">Choose two secret primes, $p$ and $q$, and compute the composite modulus: $n=p \cdot q$</td>
      </tr>
  </tbody>
</table>
<p><strong>â–²</strong> The seven steps of creating a Time-Lock Puzzle.</p>
<!-- //////////////////////////////////////////////////////////////////////////-->
<hr>
<p>I&rsquo;m currently building a backend service using the popular Pythonnic frameworks FastAPI and SQLAlchemy.
Having previously built a service using Axum and SQLx, I wanted to compare the two (FastAPI vs Axum).
Rather than creating benchmarks from scratch, I searched the vast Internet to see
if anyone had compared these two frameworks before.</p>
<p>Luke Hisao published <a href="https://luke.hsiao.dev/blog/fastapi-axum/">an excellent blog post</a>
back in 2023 where he compared Python&rsquo;s FastAPI to Rust&rsquo;s Axum. I highly recommend
Since things move fast, I wanted to try and run his benchmarks to see
if the numbers that Luke got have changed much, or if they remain approximately the same.</p>
<blockquote>
<p>I highly recommend you go read Luke&rsquo;s post, and take a look at his repo <sup id="fnref1:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>.</p>
</blockquote>
<h3 id="bench-setup">Bench setup</h3>
<p>The comparison uses a database in the <em>hot path</em> and a simple codebase.
Each web server implements a single endpoint that runs <code>100</code> calls to a <strong>local
Dockerized instance of Postgres</strong> <code>version</code> that is seeded with <code>2000</code> users,
uses a connection pool of <code>5</code> connections.
The result is returned in JSON format.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#728e00">SELECT</span> <span style="color:#728e00">*</span> <span style="color:#728e00">FROM</span> <span style="color:#7f8c8d">&#34;users&#34;</span> <span style="color:#728e00">ORDER</span> <span style="color:#728e00">BY</span> <span style="color:#434f54">user_id</span> <span style="color:#728e00">LIMIT</span> <span style="color:#8a7b52">100</span>
</span></span></code></pre></div><blockquote>
<p>I chose this query somewhat arbitrarily. Itâ€™s not particularly interesting if the database query time dominates the time so much that the comparison is not useful (e.g., say we seeded 10k users and returned the entire list every time).</p>
</blockquote>
<blockquote>
<p>the code used for each is based on the their respective Grok example for FastAPI/SQLAlchemy and Axum/SQLx.</p>
</blockquote>
<h3 id="bench-tools">Bench Tools</h3>
<p>We&rsquo;ll use the same tools that Luke did in his benchmark:</p>
<ul>
<li><a href="https://github.com/hatoo/oha">oha</a></li>
<li><a href="https://github.com/ClementTsang/bottom">btm</a></li>
</ul>
<h3 id="machine-spec">Machine Spec</h3>
<p>I&rsquo;m running this on my Apple M2 with 16 GB of RAM and a &hellip; MLX graphics card.</p>
<table>
  <thead>
      <tr>
          <th style="text-align: left">Metric</th>
          <th>FastAPI</th>
          <th>Axum</th>
          <th style="text-align: right">Change (%)</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">Throughput (rps)</td>
          <td>305</td>
          <td>9740</td>
          <td style="text-align: right">+3090</td>
      </tr>
      <tr>
          <td style="text-align: left">50% latency (ms)</td>
          <td>30</td>
          <td>1.0</td>
          <td style="text-align: right">-97</td>
      </tr>
      <tr>
          <td style="text-align: left">99% latency (ms)</td>
          <td>74</td>
          <td>1.4</td>
          <td style="text-align: right">-98</td>
      </tr>
      <tr>
          <td style="text-align: left">Peak Memory Usage (MiB)</td>
          <td>83</td>
          <td>10</td>
          <td style="text-align: right">-88</td>
      </tr>
  </tbody>
</table>
<h3 id="results">Results</h3>
<p>Dramatic improvements using Rust all around.
In particular, I was shocked at how large the latencies were for FastAPI,
especially because this was running locally with no network latency.</p>
<blockquote>
<p>coordinated omission problem</p>
</blockquote>
<p><a href="https://github.com/cryptopatrick/axum-fastapi">https://github.com/cryptopatrick/axum-fastapi</a></p>
<hr>
<!-- Footer Starts Here ------------------------------------------------------->
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
  });
  </script>
<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
<head>
<style>
<p>.formula-wrap {
overflow-x: scroll;
}</p>
<p></style></p>
</head>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p><a href="https://github.com/lukehsiao/axum-fastapi">https://github.com/lukehsiao/axum-fastapi</a>&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a>&#160;<a href="#fnref1:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>




    </div>
    
    
  </div>
</section>

<section class="section">
  <div class="container has-text-centered">
    <p>'I write to understand as much as to be understood.' â€”Elie Wiesel<br> (c) 2024 CryptoPatrick</p>
  </div>
</section>

<script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.0/build/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>




</body>
