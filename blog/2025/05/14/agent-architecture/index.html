<!DOCTYPE html>
<html lang="en-EN">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=60544&amp;path=livereload" data-no-instant defer></script>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta content="keyword 1, keyword 2, keyword 3" name="keywords">
<meta content="CryptoPatrick" name="author">
<meta property="og:title" content="ðŸ¤– Agent Architecture - Seamless Global Nature">
<meta property="og:url" content="http://localhost:60544/blog/2025/05/14/agent-architecture/">
<meta property="og:description" content="">
<meta property="og:type" content="website" />


<meta property="og:image" content="http://localhost:60544/img/post-name/name.jpg" />


<title>ðŸ¤– Agent Architecture | Seamless Global Nature</title>

<link rel="stylesheet" href="http://localhost:60544//css/style.css">
<link rel="stylesheet" href="http://localhost:60544//css/customcode.css">

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<link rel="stylesheet"
      href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.0/build/styles/default.min.css">

</head>

<body>
<section class="section">
  <div class="container">
    <nav class="nav">

 <img src="../../../../../profile.jpg" alt="Avatar" style="margin-right: 1em" height="100px">
      <div class="nav-left" style="flex-basis: auto;">
        <a class="nav-item" href="http://localhost:60544/"><h1 class="title is-4">Seamless Global Nature</h1></a>
      <nav class="nav-item level is-mobile">
          
          
          <a class="level-item" href="http://localhost:60544/about/" style="display: flex; align-items: center;">
            
            <span class="icon" style="margin-right: 0.175em; display: flex; align-items: center;">
              <i class="fa fa-male"></i>
            </span>
            
            About Me
          </a>
          
          <a class="level-item" href="http://localhost:60544/tags/" style="display: flex; align-items: center;">
            
            <span class="icon" style="margin-right: 0.175em; display: flex; align-items: center;">
              <i class="fa fa-tags"></i>
            </span>
            
            Tags
          </a>
          
          <a class="level-item" href="https://100-days-of-vibe.vercel.app" style="display: flex; align-items: center;">
            
            <span class="icon" style="margin-right: 0.175em; display: flex; align-items: center;">
              <i class="fa fa-paper-plane"></i>
            </span>
            
            100DaysOfVibe
          </a>
          
          <a class="level-item" href="https://x.com/cryptopatrick" style="display: flex; align-items: center;">
            
            <span class="icon" style="margin-right: 0.175em; display: flex; align-items: center;">
              <i class="fa fa-twitter"></i>
            </span>
            
             
          </a>
          
          <a class="level-item" href="https://github.com/cryptopatrick?tab=repositories" style="display: flex; align-items: center;">
            
            <span class="icon" style="margin-right: 0.175em; display: flex; align-items: center;">
              <i class="fa fa-github"></i>
            </span>
            
             
          </a>
          
          <a class="level-item" href="https://www.instagram.com/cryptopatrickk/" style="display: flex; align-items: center;">
            
            <span class="icon" style="margin-right: 0.175em; display: flex; align-items: center;">
              <i class="fa fa-instagram"></i>
            </span>
            
             
          </a>
          
        </nav>
      </div>
      <div class="nav-right">
        <nav class="nav-item level is-mobile">
          
        </nav>
      </div>
    </nav>
  </div>
</section>

<section class="section">
  <div class="container">
    <h1 class="title">ðŸ¤– Agent Architecture</h1>
    
    
    <h2 class="subtitle is-5">
      May 14, 2025
       by CryptoPatrick
      
        
        <span class="tags-inline" style="margin-left:0.1em;">
          
            
            <a class="tag is-link is-light" href="../../../../../tags/agents/" style="margin-left:0.25em;">Agents</a>
          
            
            <a class="tag is-link is-light" href="../../../../../tags/ai/" style="margin-left:0.25em;">AI</a>
          
        </span>
      
      
    </h2>
    <div class="content">
      <h3 id="1-installation-and-usage-guide">1. Installation and Usage Guide</h3>
<table>
  <thead>
      <tr>
          <th>Tool</th>
          <th>Version</th>
          <th>Purpose</th>
          <th>Installation Link</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Python</td>
          <td>3.11</td>
          <td>Programming language runtime</td>
          <td><a href="https://www.python.org/downloads/">Download</a></td>
      </tr>
      <tr>
          <td>uv</td>
          <td>â‰¥ 0.4.30</td>
          <td>Python package installer and virtual environment manager</td>
          <td><a href="https://github.com/astral-sh/uv">Download</a></td>
      </tr>
      <tr>
          <td>GNU Make</td>
          <td>â‰¥ 3.81</td>
          <td>Build automation tool</td>
          <td><a href="https://www.gnu.org/software/make/">Download</a></td>
      </tr>
      <tr>
          <td>Git</td>
          <td>â‰¥2.44.0</td>
          <td>Version control</td>
          <td><a href="https://git-scm.com/downloads">Download</a></td>
      </tr>
      <tr>
          <td>Docker</td>
          <td>â‰¥27.4.0</td>
          <td>Containerization platform</td>
          <td><a href="https://www.docker.com/get-started/">Download</a></td>
      </tr>
  </tbody>
</table>
<blockquote>
<p>On mac, remember that we might have a MacOS system installed Pythonbrew install python, which is different (both in version and install location) from a brew install <a href="mailto:python@3.11">python@3.11</a> version</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#95a5a6"># Install uv and check version</span>
</span></span><span style="display:flex;"><span>brew install uv
</span></span><span style="display:flex;"><span>uv --version
</span></span><span style="display:flex;"><span><span style="color:#95a5a6"># Install make and check version</span>
</span></span><span style="display:flex;"><span>brew install make
</span></span><span style="display:flex;"><span>make --version
</span></span><span style="display:flex;"><span><span style="color:#95a5a6"># Install docker and check version</span>
</span></span><span style="display:flex;"><span>brew install docker
</span></span><span style="display:flex;"><span>docker --version
</span></span></code></pre></div><h3 id="2-cloud-services">2. Cloud Services</h3>
<p>Also, the course requires access to these cloud services. The authentication to these services is done by adding the corresponding environment variables to the <code>.env</code> file:</p>
<h4 id="step-1-groq">Step 1: Groq</h4>
<p>We go to <a href="https://console.groq.com/docs/quickstart?utm_source=both&amp;utm_medium=github&amp;utm_campaign=Philoagents">groq</a>
and create an API key.</p>
<p>a. Create the API key
<a href="https://console.groq.com/keys">Create an API key</a></p>
<p>Add the API key as a local environment variable:
export GROQ_API_KEY=<your-api-key-here></p>
<table>
  <thead>
      <tr>
          <th>Service</th>
          <th>Purpose</th>
          <th>Cost</th>
          <th>Environment Variable</th>
          <th>Setup Guide</th>
          <th>Starting with Module</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><a href="https://rebrand.ly/philoagents-groq">Groq</a></td>
          <td>LLM API that powers the agents</td>
          <td>Free tier</td>
          <td><code>GROQ_API_KEY</code></td>
          <td><a href="https://rebrand.ly/philoagents-groq-quickstart">Quick Start Guide</a></td>
          <td>Module 1</td>
      </tr>
      <tr>
          <td><a href="https://rebrand.ly/philoagents-opik">Opik</a></td>
          <td>LLMOps</td>
          <td>Free tier (Hosted on Comet - same API Key)</td>
          <td><code>COMET_API_KEY</code></td>
          <td><a href="https://rebrand.ly/philoagents-opik-quickstart">Quick Start Guide</a></td>
          <td>Module 5</td>
      </tr>
      <tr>
          <td><a href="https://openai.com/index/openai-api/">OpenAI API</a></td>
          <td>LLM API used for evaluation</td>
          <td>Pay-per-use</td>
          <td><code>OPENAI_API_KEY</code></td>
          <td><a href="https://platform.openai.com/docs/quickstart">Quick Start Guide</a></td>
          <td>Module 5</td>
      </tr>
  </tbody>
</table>
<h3 id="local-deployment">Local Deployment</h3>
<p>When working locally, we setup the infrastructure using Docker.
We can use the file <a href="philoagents-api/src/philoagents/config.py">config.py</a>
for all the infrastructure-related environment variables.</p>
<h3 id="offline-deployment">Offline Deployment</h3>
<p>When we deploy the code (to cloud) we&rsquo;ll need to setup the following services with their corresponding environment variables:</p>
<table>
  <thead>
      <tr>
          <th>Service</th>
          <th>Purpose</th>
          <th>Cost</th>
          <th>Required Credentials</th>
          <th>Setup Guide</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><a href="https://rebrand.ly/philoagents-mongodb">MongoDB</a></td>
          <td>Document database</td>
          <td>Free tier</td>
          <td><code>MONGODB_URI</code></td>
          <td>1. <a href="https://rebrand.ly/philoagents-mongodb-setup-1">Create a free MongoDB Atlas account</a> <br> 2. <a href="https://rebrand.ly/philoagents-mongodb-setup-2">Create a Cluster</a> </br> 3. <a href="https://rebrand.ly/philoagents-mongodb-setup-3">Add a Database User</a> </br> 4. <a href="https://rebrand.ly/philoagents-mongodb-setup-4">Configure a Network Connection</a></td>
      </tr>
  </tbody>
</table>
<hr>
<h2 id="b-getting-started">B. Getting Started</h2>
<h3 id="1-clone-the-repository-and-cd-into-it">1. Clone the Repository and cd into it</h3>
<pre tabindex="0"><code>git clone https://github.com/cryptopatrick/bm/bm.git
cd bm/bm-api
</code></pre><h3 id="2-installation">2. Installation</h3>
<p>Next, we need to activate the Python virtual environment and install dependencies.<br>
Inside the <code>bm-api</code> directory, run:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#95a5a6"># Create and activate virtual env in .python-version</span>
</span></span><span style="display:flex;"><span>uv venv .venv
</span></span><span style="display:flex;"><span>. ./.venv/bin/activate <span style="color:#95a5a6"># or source ./.venv/bin/activate</span>
</span></span><span style="display:flex;"><span><span style="color:#95a5a6"># Install all dependencies from `pyproject.toml`</span>
</span></span><span style="display:flex;"><span>uv pip install -e .
</span></span><span style="display:flex;"><span><span style="color:#95a5a6"># Check Python version &gt; 3.11</span>
</span></span><span style="display:flex;"><span>uv run python --version
</span></span><span style="display:flex;"><span><span style="color:#95a5a6"># Output: Python 3.11.9</span>
</span></span></code></pre></div><h3 id="3-setup-environment-configuration">3. Setup Environment Configuration</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#95a5a6"># Create our environment file.</span>
</span></span><span style="display:flex;"><span><span style="color:#95a5a6"># Inside the `bm-api` directory, run:</span>
</span></span><span style="display:flex;"><span>cp .env.example .env
</span></span></code></pre></div><p>Once the <code>.env</code> file is created, open it and configure the required credentials, following the inline comments and the recommendations from the Cloud Services prerequisites section.</p>
<h3 id="4-project-structure">4. Project Structure</h3>
<p>We should now have a simple Clean Architecture structure used for production system.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>bm-api/
</span></span><span style="display:flex;"><span>    â”œâ”€â”€ data/                  <span style="color:#95a5a6"># Data files</span>
</span></span><span style="display:flex;"><span>    â”œâ”€â”€ notebooks/             <span style="color:#95a5a6"># Notebooks</span>
</span></span><span style="display:flex;"><span>    â”œâ”€â”€ src/bm/       <span style="color:#95a5a6"># Main package directory</span>
</span></span><span style="display:flex;"><span>    â”‚   â”œâ”€â”€ application/       <span style="color:#95a5a6"># Application layer</span>
</span></span><span style="display:flex;"><span>    â”‚   â”œâ”€â”€ domain/            <span style="color:#95a5a6"># Domain layer</span>
</span></span><span style="display:flex;"><span>    â”‚   â”œâ”€â”€ infrastructure/    <span style="color:#95a5a6"># Infrastructure layer</span>
</span></span><span style="display:flex;"><span>    â”‚   â””â”€â”€ config.py          <span style="color:#95a5a6"># Configuration settings</span>
</span></span><span style="display:flex;"><span>    â”œâ”€â”€ tools/                 <span style="color:#95a5a6"># Entry scripts use the Py package</span>
</span></span><span style="display:flex;"><span>    â”œâ”€â”€ .env.example           <span style="color:#95a5a6"># Environment variables template</span>
</span></span><span style="display:flex;"><span>    â”œâ”€â”€ .python-version        <span style="color:#95a5a6"># Python version specification</span>
</span></span><span style="display:flex;"><span>    â”œâ”€â”€ Dockerfile             <span style="color:#95a5a6"># API Docker image definition</span>
</span></span><span style="display:flex;"><span>    â”œâ”€â”€ Makefile               <span style="color:#95a5a6"># Project commands</span>
</span></span><span style="display:flex;"><span>    â””â”€â”€ pyproject.toml         <span style="color:#95a5a6"># Project dependencies</span>
</span></span></code></pre></div><hr>
<h2 id="b-set-up-local-infrastructure">B. Set Up Local Infrastructure</h2>
<p>Docker is used to setup the local infrastructure.<br>
Ports used are: <code>27017</code> (MongoDB), <code>8000</code> (Agent API) and <code>8080</code> (Game UI).<br>
From the root <code>bm</code> directory</p>
<ol>
<li>To start the Docker infra:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>make infrastructure-up
</span></span></code></pre></div><ol start="2">
<li>To stop the Docker infra:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>make infrastructure-stop
</span></span></code></pre></div><ol start="3">
<li>To build the Docker images (without running):</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>make infrastructure-build
</span></span></code></pre></div><hr>
<h2 id="c-running-the-application">C. Running the Application</h2>
<p>After we&rsquo;ve set up our environment (through the <code>.env</code> file) and set up the Dockerized local infrastructure, we are ready to run and test our application.</p>
<h3 id="1-modules-1-2-3-4-and-6">1. Modules 1, 2, 3, 4 and 6</h3>
<p>From the root <code>bm</code> directory, we populate the long term memory within our MongoDB instance (required for agentic RAG) with the following command:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>make create-long-term-memory
</span></span></code></pre></div><blockquote>
<p>[!NOTE]
To visualize the raw and RAG data from MongoDB, we recommend using <a href="https://rebrand.ly/philoagents-mongodb-compass">MongoDB Compass</a> or Mongo&rsquo;s official IDE plugin (e.g., <code>MongoDB for VS Code</code>). To connect to the working MongoDB instance, use the <code>MONGODB_URI</code> value from the <code>.env</code> file or found inside the <a href="philoagents-api/src/philoagents/config.py">config.py</a> file.</p>
</blockquote>
<p>If everything went well, the application will be running on localhost, port 8080, and can be checked by opening that url
in a browser.</p>
<pre tabindex="0"><code>open -a Safari &#34;http://localhost:8080&#34;
</code></pre><h3 id="2-api-documentation">2. API Documentation</h3>
<p>We can access the API documentation here:</p>
<pre tabindex="0"><code>http://localhost:8000/docs
</code></pre><p>If we want to <strong>directly call the agent, bypassing the backend and UI logic</strong>, we can do so by running:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>make call-agent
</span></span></code></pre></div><p>To delete the long term memory from your MongoDB instance, we can run the following command:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>make delete-long-term-memory
</span></span></code></pre></div><h3 id="3-monitoring-agents">3. Monitoring Agents</h3>
<p>The evaluation and monitoring module has its own instructions.<br>
To visualize the prompt traces, as seen in the screenshot below, visit <a href="https://rebrand.ly/bm-opik-dashboard">Opik</a>.</p>
<p>To evaluate the agents, from the root <code>bm</code> directory, run:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>make evaluate-agent
</span></span></code></pre></div><p>To visualize the evaluation results, visit
<a href="https://rebrand.ly/bm-opik-dashboard">Opik</a>.</p>
<p>We can generate a dataset with the following command:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>make generate-evaluation-dataset
</span></span></code></pre></div><hr>




    </div>
    
    
  </div>
</section>

<section class="section">
  <div class="container has-text-centered">
    <p>'I write to understand as much as to be understood.' â€”Elie Wiesel<br> (c) 2024 CryptoPatrick</p>
  </div>
</section>

<script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.0/build/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>




</body>
