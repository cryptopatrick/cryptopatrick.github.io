<!DOCTYPE html>
<html lang="en-EN">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=60544&amp;path=livereload" data-no-instant defer></script>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta content="keyword 1, keyword 2, keyword 3" name="keywords">
<meta content="CryptoPatrick" name="author">
<meta property="og:title" content="Quickstart: Corbits x402 - Seamless Global Nature">
<meta property="og:url" content="http://localhost:60544/blog/2025/11/03/quickstart-corbits-x402/">
<meta property="og:description" content="">
<meta property="og:type" content="website" />


<meta property="og:image" content="http://localhost:60544/img/post-name/name.jpg" />


<title>Quickstart: Corbits x402 | Seamless Global Nature</title>

<link rel="stylesheet" href="http://localhost:60544//css/style.css">
<link rel="stylesheet" href="http://localhost:60544//css/customcode.css">

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<link rel="stylesheet"
      href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.0/build/styles/default.min.css">

</head>

<body>
<section class="section">
  <div class="container">
    <nav class="nav">

 <img src="../../../../../profile.jpg" alt="Avatar" style="margin-right: 1em" height="100px">
      <div class="nav-left" style="flex-basis: auto;">
        <a class="nav-item" href="http://localhost:60544/"><h1 class="title is-4">Seamless Global Nature</h1></a>
      <nav class="nav-item level is-mobile">
          
          
          <a class="level-item" href="http://localhost:60544/about/" style="display: flex; align-items: center;">
            
            <span class="icon" style="margin-right: 0.175em; display: flex; align-items: center;">
              <i class="fa fa-male"></i>
            </span>
            
            About Me
          </a>
          
          <a class="level-item" href="http://localhost:60544/tags/" style="display: flex; align-items: center;">
            
            <span class="icon" style="margin-right: 0.175em; display: flex; align-items: center;">
              <i class="fa fa-tags"></i>
            </span>
            
            Tags
          </a>
          
          <a class="level-item" href="https://100-days-of-vibe.vercel.app" style="display: flex; align-items: center;">
            
            <span class="icon" style="margin-right: 0.175em; display: flex; align-items: center;">
              <i class="fa fa-paper-plane"></i>
            </span>
            
            100DaysOfVibe
          </a>
          
          <a class="level-item" href="https://x.com/cryptopatrick" style="display: flex; align-items: center;">
            
            <span class="icon" style="margin-right: 0.175em; display: flex; align-items: center;">
              <i class="fa fa-twitter"></i>
            </span>
            
             
          </a>
          
          <a class="level-item" href="https://github.com/cryptopatrick?tab=repositories" style="display: flex; align-items: center;">
            
            <span class="icon" style="margin-right: 0.175em; display: flex; align-items: center;">
              <i class="fa fa-github"></i>
            </span>
            
             
          </a>
          
          <a class="level-item" href="https://www.instagram.com/cryptopatrickk/" style="display: flex; align-items: center;">
            
            <span class="icon" style="margin-right: 0.175em; display: flex; align-items: center;">
              <i class="fa fa-instagram"></i>
            </span>
            
             
          </a>
          
        </nav>
      </div>
      <div class="nav-right">
        <nav class="nav-item level is-mobile">
          
        </nav>
      </div>
    </nav>
  </div>
</section>

<section class="section">
  <div class="container">
    <h1 class="title">Quickstart: Corbits x402</h1>
    
    
    <h2 class="subtitle is-5">
      November 3, 2025
       by CryptoPatrick
      
        
        <span class="tags-inline" style="margin-left:0.1em;">
          
            
            <a class="tag is-link is-light" href="../../../../../tags/agents/" style="margin-left:0.25em;">agents</a>
          
            
            <a class="tag is-link is-light" href="../../../../../tags/ai/" style="margin-left:0.25em;">ai</a>
          
            
            <a class="tag is-link is-light" href="../../../../../tags/crypto/" style="margin-left:0.25em;">crypto</a>
          
            
            <a class="tag is-link is-light" href="../../../../../tags/x402/" style="margin-left:0.25em;">x402</a>
          
        </span>
      
      
    </h2>
    <div class="content">
      <!-- ////////////////////////////////////////////////////////////////////////-->
<p><img src="https://img.shields.io/badge/Work_In_Progress-orange.svg" alt="Version:0.1.0">
<img src="https://img.shields.io/badge/Text_Version-0.4.5-blue.svg" alt="Version:0.1.0">
<img src="https://img.shields.io/badge/Source_Code_Builds-Yes-green.svg" alt="Version:0.1.0"></p>
<!-- ////////////////////////////////////////////////////////////////////////-->
<br>
<blockquote>
<p><strong>Preface:</strong></p>
</blockquote>
<!-- ////////////////////////////////////////////////////////////////////////-->
<h2 id="what-is-it">What is it?</h2>
<p>Corbits makes it easy to get started with the x402 protocol for micropayments. Corbits is built by ABK Labs
and uses the OSS Faremeter Framework.</p>
<h3 id="installation">Installation</h3>
<p>Let&rsquo;s get started so that we can get paid when agents or humans call our API.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#95a5a6"># First we need to install the Corbits sdk</span>
</span></span><span style="display:flex;"><span>npm install @faremeter/payment-solana @faremeter/fetch @faremeter/info @solana/web3.js
</span></span></code></pre></div><blockquote>
<p>To run the example below, we need to use the Solana Mainnet and the wallet has to have some SOL in its balance.</p>
</blockquote>
<h3 id="step-04--funding">Step 04:  Funding</h3>
<p>Create a payer-wallet.json and fund it with some USDC and some mainnet sol.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#00979d">import</span> { <span style="color:#728e00">Keypair</span>, <span style="color:#728e00">PublicKey</span>, <span style="color:#728e00">VersionedTransaction</span>, <span style="color:#728e00">Connection</span> } <span style="color:#728e00">from</span> <span style="color:#7f8c8d">&#34;@solana/web3.js&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#00979d">import</span> { <span style="color:#728e00">createPaymentHandler</span> } <span style="color:#728e00">from</span> <span style="color:#7f8c8d">&#34;@faremeter/payment-solana/exact&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#00979d">import</span> { <span style="color:#728e00">wrap</span> } <span style="color:#728e00">from</span> <span style="color:#7f8c8d">&#34;@faremeter/fetch&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#00979d">import</span> { <span style="color:#728e00">lookupKnownSPLToken</span> } <span style="color:#728e00">from</span> <span style="color:#7f8c8d">&#34;@faremeter/info/solana&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#00979d">import</span> <span style="color:#728e00">*</span> <span style="color:#728e00">as</span> <span style="color:#728e00">fs</span> <span style="color:#728e00">from</span> <span style="color:#7f8c8d">&#34;fs&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#95a5a6">// Load keypair from file
</span></span></span><span style="display:flex;"><span><span style="color:#95a5a6"></span><span style="color:#00979d">const</span> <span style="color:#728e00">keypairData</span> <span style="color:#728e00">=</span> <span style="color:#728e00">JSON</span>.<span style="color:#728e00">parse</span>(<span style="color:#728e00">fs</span>.<span style="color:#728e00">readFileSync</span>(<span style="color:#7f8c8d">&#34;./payer-wallet.json&#34;</span>, <span style="color:#7f8c8d">&#34;utf-8&#34;</span>));
</span></span><span style="display:flex;"><span><span style="color:#00979d">const</span> <span style="color:#728e00">keypair</span> <span style="color:#728e00">=</span> <span style="color:#728e00">Keypair</span>.<span style="color:#728e00">fromSecretKey</span>(<span style="color:#728e00">Uint8Array</span>.<span style="color:#728e00">from</span>(<span style="color:#728e00">keypairData</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#00979d">const</span> <span style="color:#728e00">network</span> <span style="color:#728e00">=</span> <span style="color:#7f8c8d">&#34;mainnet-beta&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#00979d">const</span> <span style="color:#728e00">connection</span> <span style="color:#728e00">=</span> <span style="color:#728e00">new</span> <span style="color:#728e00">Connection</span>(<span style="color:#7f8c8d">&#34;https://api.mainnet-beta.solana.com&#34;</span>);
</span></span><span style="display:flex;"><span><span style="color:#00979d">const</span> <span style="color:#728e00">usdcInfo</span> <span style="color:#728e00">=</span> <span style="color:#728e00">lookupKnownSPLToken</span>(<span style="color:#728e00">network</span>, <span style="color:#7f8c8d">&#34;USDC&#34;</span>);
</span></span><span style="display:flex;"><span><span style="color:#00979d">const</span> <span style="color:#728e00">usdcMint</span> <span style="color:#728e00">=</span> <span style="color:#728e00">new</span> <span style="color:#728e00">PublicKey</span>(<span style="color:#728e00">usdcInfo</span>.<span style="color:#728e00">address</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#95a5a6">// Create wallet interface
</span></span></span><span style="display:flex;"><span><span style="color:#95a5a6"></span><span style="color:#00979d">const</span> <span style="color:#728e00">wallet</span> <span style="color:#728e00">=</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#728e00">network</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#728e00">publicKey</span><span style="color:#728e00">:</span> <span style="color:#728e00">keypair</span>.<span style="color:#728e00">publicKey</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#728e00">updateTransaction</span><span style="color:#728e00">:</span> <span style="color:#00979d">async</span> (<span style="color:#728e00">tx</span><span style="color:#728e00">:</span> <span style="color:#728e00">VersionedTransaction</span>) =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#728e00">tx</span>.<span style="color:#728e00">sign</span>([<span style="color:#728e00">keypair</span>]);
</span></span><span style="display:flex;"><span>    <span style="color:#728e00">return</span> <span style="color:#728e00">tx</span>;
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#95a5a6">// Setup payment handler
</span></span></span><span style="display:flex;"><span><span style="color:#95a5a6"></span><span style="color:#00979d">const</span> <span style="color:#728e00">handler</span> <span style="color:#728e00">=</span> <span style="color:#728e00">createPaymentHandler</span>(<span style="color:#728e00">wallet</span>, <span style="color:#728e00">usdcMint</span>, <span style="color:#728e00">connection</span>);
</span></span><span style="display:flex;"><span><span style="color:#00979d">const</span> <span style="color:#728e00">fetchWithPayer</span> <span style="color:#728e00">=</span> <span style="color:#728e00">wrap</span>(<span style="color:#728e00">fetch</span>, { <span style="color:#728e00">handlers</span><span style="color:#728e00">:</span> [<span style="color:#728e00">handler</span>] });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#95a5a6">// Call the API - payment happens automatically
</span></span></span><span style="display:flex;"><span><span style="color:#95a5a6"></span><span style="color:#00979d">const</span> <span style="color:#728e00">response</span> <span style="color:#728e00">=</span> <span style="color:#00979d">await</span> <span style="color:#728e00">fetchWithPayer</span>(<span style="color:#7f8c8d">&#34;https://helius.api.corbits.dev&#34;</span>, {
</span></span><span style="display:flex;"><span>  <span style="color:#728e00">method</span><span style="color:#728e00">:</span> <span style="color:#7f8c8d">&#34;POST&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#728e00">headers</span><span style="color:#728e00">:</span> { <span style="color:#7f8c8d">&#34;Content-Type&#34;</span><span style="color:#728e00">:</span> <span style="color:#7f8c8d">&#34;application/json&#34;</span> },
</span></span><span style="display:flex;"><span>  <span style="color:#728e00">body</span><span style="color:#728e00">:</span> <span style="color:#728e00">JSON</span>.<span style="color:#728e00">stringify</span>({
</span></span><span style="display:flex;"><span>    <span style="color:#728e00">jsonrpc</span><span style="color:#728e00">:</span> <span style="color:#7f8c8d">&#34;2.0&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#728e00">id</span><span style="color:#728e00">:</span> <span style="color:#8a7b52">1</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#728e00">method</span><span style="color:#728e00">:</span> <span style="color:#7f8c8d">&#34;getBlockHeight&#34;</span>,
</span></span><span style="display:flex;"><span>  }),
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#00979d">const</span> <span style="color:#728e00">data</span> <span style="color:#728e00">=</span> <span style="color:#00979d">await</span> <span style="color:#728e00">response</span>.<span style="color:#728e00">json</span>();
</span></span><span style="display:flex;"><span><span style="color:#728e00">console</span>.<span style="color:#728e00">log</span>(<span style="color:#728e00">data</span>);
</span></span></code></pre></div><h3 id="step-05-run-the-command">Step 05: Run the command</h3>
<p>Next, we run the end-to-end example, which is written in TypeScript. The script will 1) pay for the RPC request and 2) return the block height paying?? using the corbits x402 protocol.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#95a5a6"># Execute the Solana Smart Contract using corbits.</span>
</span></span><span style="display:flex;"><span>npx tsx e2e.ts
</span></span></code></pre></div><p>If everything went well, we should see the following output in the terminal:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#434f54">&#34;jsonrpc&#34;</span>: <span style="color:#7f8c8d">&#34;2.0&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#434f54">&#34;result&#34;</span>: <span style="color:#8a7b52">348510722</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#434f54">&#34;id&#34;</span>: <span style="color:#8a7b52">1</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="step-07-verify-the-transaction">Step 07: Verify the Transaction</h3>
<p>We can go to <a href="https://explorer.solana.com/">https://explorer.solana.com/</a> and verify that the transaction actually was recorded on the ledger.</p>
<p><figure><img src="../../../../../img/time-lock-message/rebellion.jpg">
</figure>
<br>
<strong>▲[^1]</strong> A Rebel ship orbiting above the Federation&rsquo;s top secret military research lab, <em>The Periphery</em>.</p>
<p>⠀⠀⠀⠀⠀ This is a paragraph.
⠀⠀⠀⠀⠀ This is another paragraph.</p>




    </div>
    
    
  </div>
</section>

<section class="section">
  <div class="container has-text-centered">
    <p>'I write to understand as much as to be understood.' —Elie Wiesel<br> (c) 2024 CryptoPatrick</p>
  </div>
</section>

<script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.0/build/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>




</body>
